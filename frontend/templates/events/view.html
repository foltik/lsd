{% extends "layout.html" %}

{% block title %}{{ event.title }}{% endblock title %}

{% block content %}
  <div id="events/view">
    <h1> {{ event.title }}</h1>

 {% if event.flyer | has_value %}
      <div class="current-cover-image">
        <h3>Cover Image:</h3>
        <img src="{{ event.flyer | unwrap_or_empty }}" alt="{{ event.title }} cover image" class="event-cover-preview" />
      </div>
    {% endif %}

    <div class="event-details">
      <div class="field-display">
        <label>Event Title:</label>
        <span>{{ event.title }}</span>
      </div>

      <div class="field-display">
        <label>Description:</label>
        <p>{{ event.description }}</p>
      </div>

      <div class="field-display">
        <label>Event Date:</label>
        <span>{{ event.start | format_datetime("%A, %B %d, %Y at %I:%M %p") }}</span>
      </div>

      <div class="field-display">
        <label>Slug:</label>
        <span>{{ event.slug }}</span>
      </div>
    </div>

    <!-- Ticket Types Section -->
  {% if event_tickets | length > 0 %}
    <h2>Ticket Types</h2>
    <div class="tickets-container">
      {% for event_ticket in event_tickets %}
        <div class="ticket-row">
          <h4>Ticket ID: {{ event_ticket.ticket_id }}</h4>
          <div class="ticket-details">
            <div class="ticket-detail">
              <label>Price:</label>
              <span>${{ event_ticket.price }}</span>
            </div>
            <div class="ticket-detail">
              <label>Quantity:</label>
              <span>{{ event_ticket.quantity }} available</span>
            </div>
            <div class="ticket-detail">
              <label>Sort Order:</label>
              <span>{{ event_ticket.sort }}</span>
            </div>
          </div>
        </div>
      {% endfor %}
    </div>
    {% endif %}

    <div class="actions">
        <a href="/events/{{ event.id }}/edit">Edit Event</a>
        <a href="/events">Back to Events</a>

    <!-- Delete Event Form -->
    <form class="ext/form" action="/events/{{ event.id }}/delete" method="post" style="margin-top: 20px;  onsubmit="console.log('Delete form submitted!')"">
      <button type="submit" onclick="return confirm('Are you sure you want to delete this event?')">Delete Event</button>
    </form>
  </div>

{% endblock content %}
