{% extends "layout.html" %}

{% block title %}
  Suggestion Box - light and sound
{% endblock title %}

{% block head %}
  <script
    src="https://challenges.cloudflare.com/turnstile/v0/api.js"
    async
    defer
  ></script>
{% endblock head %}

{% block content %}
  <section class="ext/layout standard">
    <header>
      <h1>Suggestion Box</h1>
    </header>
    <form class="ext/form" method="post">
      <div class="field">
        <label for="name">Name (optional)</label>
        <input type="text" id="name" name="name" autocomplete="name" />
      </div>
      <div class="field">
        <label for="email">Email (optional)</label>
        <input type="email" id="email" name="email" autocomplete="email" />
      </div>
      <div class="field">
        <label for="subject">Subject</label>
        <input type="text" id="subject" name="subject" required />
      </div>
      <div class="field">
        <label for="message">Message</label>
        <textarea
          id="message"
          name="message"
          placeholder="For questions and comments. Please do not send event proposals here."
          rows="8"
          required
        ></textarea>
      </div>

      <div
        class="cf-turnstile"
        data-sitekey="{{ turnstile_site_key }}"
        data-callback="onTurnstileSuccess"
        data-error-callback="onTurnstileError"
        data-expired-callback="onTurnstileError"
      ></div>

      <button id="submit" type="submit" class="ext/button" disabled>
        Verifying...
      </button>
    </form>
  </section>
{% endblock content %}

{% block scripts %}
  <script>
    const btn = document.getElementById("submit");
    function onTurnstileSuccess(token) {
      btn.innerText = "Send";
      btn.disabled = false;
    }
    function onTurnstileError() {
      btn.classList.add(":red");
      btn.innerText = "Captcha Failed";
      btn.disabled = true;
    }
  </script>
{% endblock scripts %}
